{% extends "base.html" %} {% load static %} 
{% block title %}chat-interface{%endblock title %} 
{% block styles %}
<link
  rel="stylesheet"
  type="text/css"
  href="{% static 'assets/css/chat_interface.css' %}"
/>
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css"
/>
{% endblock styles %} 
{% block content %}
<button class="mobile-menu-toggle">
  <i class="fas fa-bars"></i>
</button>

<div class="chat-container" id="chatContainer">
  <!-- History Sidebar -->
  <aside class="history-sidebar">
    <div class="sidebar-header">
      <button class="new-chat-btn" id="newChatBtn">
        <i class="fas fa-plus"></i> New Chat
      </button>
    </div>
    <div class="chat-history">
      <div class="history-item active">
        <i class="fas fa-comment"></i>
        Image Analysis Chat
        <div class="message-time">2 min ago</div>
      </div>
      <div class="history-item">
        <i class="fas fa-comment"></i>
        Code Review Session
        <div class="message-time">1 hour ago</div>
      </div>
      <!-- More history items -->
    </div>
  </aside>

  <!-- Main Chat Area -->
  <main class="main-chat">
    <header class="chat-header">
      <h4>Mobtakir Chat</h4>
      <div class="header-actions">
        <a href="{% url 'chatbot:chat_settings' %}" class="input-button">
          <i class="fas fa-cog"></i>
        </a>
      </div>
    </header>

    <div class="chat-messages" id="chat-messages">
      <div class="message bot-message">
        Hello! I'm your AI assistant. I can help you with text, images, code,
        and more.
        <div class="message-time">12:00 PM</div>
      </div>
    </div>

    <div class="chat-input-area w-100">
      <div class="input-container w-100">
        <div id="chat-form" class="w-100 d-flex flex-row justify-content-center align-items-between">
          {% csrf_token %}
          <div class="text-input-area w-75 me-1">
            <div class="input-buttons">
              <button class="input-button" title="Upload Image">
                <i class="fas fa-image"></i>
              </button>
              <button class="input-button" title="Upload File">
                <i class="fas fa-paperclip"></i>
              </button>
              <button class="input-button" title="Record Audio">
                <i class="fas fa-microphone"></i>
              </button>
              <button class="input-button" title="Code Snippet">
                <i class="fas fa-code"></i>
              </button>
            </div>
            <textarea
              id="user-input"
              class="text-input"
              placeholder="Type your message..."
              rows="1"
            ></textarea>
          </div>
          <button type="submit" class="send-button w-25" id="send-button">
            <i class="fas fa-paper-plane"></i>
          </button>
        </div>
      </div>
      <div class="upload-preview">
        <img class="preview-image" alt="Upload preview" />
        <button class="input-button remove-upload">
          <i class="fas fa-times"></i>
        </button>
      </div>
    </div>
  </main>
</div>

<!-- File Upload Modal -->
<div class="modal" id="uploadModal">
  <div class="modal-content">
    <h5>Upload File</h5>
    <input type="file" accept="image/*,.pdf,.doc,.docx" multiple />
    <button class="send-button">Upload</button>
    <button class="input-button">Cancel</button>
  </div>
</div>
{% endblock content %}
{% block scripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/marked/9.1.2/marked.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script
  type="text/javascript"
  src="{% static 'assets/js/chat_interface_latest.js' %}"
></script>
{% endblock scripts %}
